[tool:pytest]
# Pytest configuration file
minversion = 8.0
# Default to unit tests only - use explicit paths for integration/e2e
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
addopts = --strict-markers --strict-config --verbose --tb=short --durations=10 --maxfail=5 --color=yes

# Markers for organizing tests
markers =
    unit: Unit tests that test individual functions/classes
    integration: Integration tests that test multiple components
    e2e: End-to-end tests that test complete workflows
    slow: Tests that take a long time to run
    azure: Tests that require Azure services
    database: Tests that require database access
    auth: Tests related to authentication/authorization
    api: Tests for API endpoints
    audio: Tests for audio processing functionality
    llm: Tests for LLM/AI functionality
    minutes: Tests for minutes generation
    transcription: Tests for transcription functionality
    network: Tests that require actual network access (disabled by default)
    external_api: Tests that call external APIs (disabled by default)

# How to run different test types:
# Unit tests only (default): pytest
# Include integration tests:  pytest --integration
# Integration tests only:     pytest --integration -m integration
# E2E tests only:            pytest -m e2e
# All tests:                 pytest --integration

# Async test configuration
asyncio_mode = auto

# Test discovery patterns
norecursedirs =
    .git
    .tox
    dist
    build
    *.egg
    __pycache__
    .pytest_cache
    htmlcov
    evaluation
    alembic

# Environment variables for tests
env =
    ENVIRONMENT=test
    TESTING=true
